<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Calibrating ðŸŒŽtop</title>

	<link rel="stylesheet" href="reveal.js/dist/reset.css">
	<link rel="stylesheet" href="reveal.js/dist/reveal.css">
	<link rel="stylesheet" href="reveal.js/dist/theme/mhpc.css" id="theme">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="reveal.js/plugin/highlight/monokai.css" id="highlight-theme">
</head>

<body>
	<div class="reveal">

		<div class="slides">
			<section>
				<section>
					<h1>Calibrating ðŸŒŽtop</h1>
				</section>
				<section>
					<h3>High-Performance Derivative-free Optimization for the GEOtop Model Calibration</h3>
					<h4>Stefano Campanella</h4>
					<small>Giacomo Bertoldi, Alberto Sartori, Emanuele Cordano</small>
					<p>
						<img class="plain" src="images/mhpc.png" height="100px">
						<img class="plain" src="images/hpctres.png" height="100px">
					</p>
					<p>
						<img class="plain" src="images/sissa.png" height="100px">
						<img class="plain" src="images/ictp.png" height="100px">
						<img class="plain" src="images/ogs.png" height="100px">
						<img class="plain" src="images/eurac.png" height="100px">
					</p>
				</section>
			</section>
			
			<section>
				<h4>The Project in One Sentence:</h4>
				<p class="fragment">Exploit High-Performance techniques for the calibration of the parameters of the
					GEOtop model (for 1D simulations) against real data.</p>
			</section>
		
			<section>
				<section>
					<h3>About Hydrology</h3>
				</section>
				<section data-background-color="rgb(210, 162, 117)">
					<video data-autoplay loop src="https://media.giphy.com/media/xT5LMpqtPVk2uLsoMM/giphy.mp4"></video>
				</section>
				<section data-background-image="images/wikihydro.jpg">
					<h4>Hydrology according to Wikipedia</h4>
					<p class="fragment highlight-red">(sorry, I'm not an hydrologist)</p>
					<p>The study of the movement, distribution and management of the water on the <em>surface</em> of Earth.</p>
				</section>
			</section>
	
			<section>
				<section>
					<h3>The GEOtop model</h3>
				</section>
				<section>
					<p>GEOtop simulates the water flow in the soil and the energy exchange with the atmosphere.</p>
					<ul class="fragment">
						<li>1D or 3D simulations.</li>
						<li>Water or energy budgets, or both.</li>
					</ul>
				</section>
				<section>
					<h4>20 years of development</h4>
					<p>Scientifically tested and published.</p>
				</section>
				<section>
					<p>Thanks to the work done in the past MHPC editions is now more usable, robust and stable.</p>
					<p><small>Reengineering and optimization of GEOtop software package, E. Bortoli</small></p>
				</section>
			</section>

			<section>
				<section>
					<h3>The Calibration</h3>
				</section>
				<section>
					<h4>Inputs</h4>
					<p>Meteo data, elevations, soil parameters</p>
					<ul class="fragment">
						<li>Parameters with uncertainties or unknown</li>
						<li>Phenomenological description, effective values</li>
					</ul>
				</section>
				<section>
					<h4>Outputs</h4>
					<p> Ex: Snow cover, soil temperature, soil moisture</p>
					<p class="fragment">Usually time-series, can be compared with experimental data and
						squeezed into a single number: the goodness of fit (GoF).</p>
				</section>
			</section>

			<section>
				<section>
					<h3>Derivative-free optimization</h3>
				</section>
				<section>
					<p>GEOtop as a black box: takes some inputs and spits out a number (the GoF).</p>
					<p>No gradients: most minimization algorithms can't be used (es. SGD).</p>
				</section>
				<section>
					<p>Heuristic algorithms explore the parameters space in a smart (read <em>hopefully not dumb</em>) way.</p>
					<p>Not unusual in machine learning and AI (e.g. in hyperparameters optimization).</p>
				</section>
			</section>

			<section>
				<section>
					<h3>The Hydrological Relevance</h3>
				</section>
				<section>
					<p>Case study: LTSER (Long Term Socio-Ecological Research) sites in Val di Mazia, South Tyrol.</p>
				</section>
				<section>
					<ul>
						<li>Sensitivity and Unceretainity analysis</li>
						<li>Inference of physical parameters of the system</li>
						<li>Understanding of the model</li>
					</ul>
				</section>
			</section>

			<section>
				<section>
					<h3>The need of HPC</h3>
				</section>
				<section>
					<p>GEOtop is compute bound (some time is spent on IO, definetly not memory bound).</p>
				</section>
				<section>
					<p>Optimization can require thousands of simulations.</p>
					<p>Each one takes â‰ˆ 1 min.</p>
				</section>
				<section data-background-color="red">
					<h4>Parallel is the only way</h4>
					<p>The optimizer must scale</p>
				</section>
			</section>

			<section>
				<section>
					<h3>Bonus: algorithmic relevance</h3>
				</section>
				<section>
					<p>Which algorithm is most suited for the problem?</p>
					<p>Particle Swarm, Genetic Algorithms, Simulated Annealing, etc.</p>
				</section>
			</section>

			<section>
				<section>
					<h3>The proposed solution</h3>
				</section>
				<section>
					<p>Write, test and deploy three Python packages using modern software engineering techniques.</p>
				</section>
				<section>
					<h4>A wrapper</h4>
					<p>GEOtoPy: Simple, paper-thin wrapper around GEOtop based on template configuration files</p>
				</section>
				<section>
					<h4>An optimizer</h4>
					<p>Adapting Facebook Nevergrad? From scratch using Ray to go multinode? Develop custom algorithms?</p>
				</section>
				<section>
					<h4>A benchmark suite</h4>
					<p>Scripts for testing on a case study.</p>
				</section>
			</section>

			<section>
				<section>
					<h3>HPC challenges</h3>
				</section>
				<section>
					<p>The problem seems embarassingly parallel<span class="fragment">, <br>but it's not.</span></p>
					<!-- <p class="fragment">The runs are independent, their arguments are not.</p> -->
				</section>
				<section>
					<p>What does strong scaling mean in this context?</p>
					<!-- <p>The algorithms can return worse results on large number of workers.</p> -->
				</section>
				<section>
					<p>What does weak scaling mean in this context?</p>
					<!-- <p>What does it means to consider larger problems in this case?</p> -->
				</section>
			</section>

			<!-- <section>
				<section>
					<h3>Future exploitation of this work</h3>
				</section>
				<section>
					<ul>
						<li>Calibration specific GEOtop optimizations</li>
						<li>Custom algorithms making use of statistical hypothesis on the paramerts</li>
					</ul>
				</section>
			</section> -->

			<section>
				<section>
					<h3>Recap</h3>
				</section>
				<section>
					<h4>The goal</h4>
					<p>Write a modern software capable of calibrating GEOtop in a reasonable amount of time.</p>
				</section>
				<section>
					<h4>The motivation</h4>
					<p>Getting insights into derivative-free optimization while solving a real scientific problem.</p>
				</section>
				<section>
					<h4>The approach</h4>
					<p>Using state-of-the-art parallel algorithms and programming techniques.</p>
				</section>
			</section>

			<section>
				<h3>Acknowledgments</h3>
				<p>The research reported in this work will be supported
					by OGS, Eurac and CINECA under HPC-TRES program award number 2019-33</p>
			</section>

			<section>
				<h3>Q&A</h3>
				<em>He who knows does not speak; <br>He who speaks does not know.</em>
				<p>(Laozi, <em>Tao Te Ching</em>)</p>
			</section>
		</div>
	</div>

	<script src="reveal.js/dist/reveal.js"></script>
	<script src="reveal.js/plugin/notes/notes.js"></script>
	<script src="reveal.js/plugin/markdown/markdown.js"></script>
	<script src="reveal.js/plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,

			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>
</body>

</html>